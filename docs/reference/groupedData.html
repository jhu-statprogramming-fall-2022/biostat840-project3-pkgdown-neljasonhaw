<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="An object of the groupedData class is constructed from the
  formula and data by attaching the formula as an
  attribute of the data, along with any of outer, inner,
  labels, and units that are given.  If
  order.groups is TRUE the grouping factor is converted to
  an ordered factor with the ordering determined by
  FUN. Depending on the number of grouping levels and the type of
  primary covariate, the returned object will be of one of three
  classes: nfnGroupedData - numeric covariate, single level of
  nesting; nffGroupedData - factor covariate, single level of
  nesting; and nmGroupedData - multiple levels of
  nesting. Several modeling and plotting functions can use the formula
  stored with a groupedData object to construct default plots and
  models."><title>Construct a groupedData Object — groupedData • nlme</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.4/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.4/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Construct a groupedData Object — groupedData"><meta property="og:description" content="An object of the groupedData class is constructed from the
  formula and data by attaching the formula as an
  attribute of the data, along with any of outer, inner,
  labels, and units that are given.  If
  order.groups is TRUE the grouping factor is converted to
  an ordered factor with the ordering determined by
  FUN. Depending on the number of grouping levels and the type of
  primary covariate, the returned object will be of one of three
  classes: nfnGroupedData - numeric covariate, single level of
  nesting; nffGroupedData - factor covariate, single level of
  nesting; and nmGroupedData - multiple levels of
  nesting. Several modeling and plotting functions can use the formula
  stored with a groupedData object to construct default plots and
  models."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nlme</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.1-160</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/lme-example.html">Example Analysis</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Construct a groupedData Object</h1>
      
      <div class="d-none name"><code>groupedData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>An object of the <code>groupedData</code> class is constructed from the
  <code>formula</code> and <code>data</code> by attaching the <code>formula</code> as an
  attribute of the data, along with any of <code>outer</code>, <code>inner</code>,
  <code>labels</code>, and <code>units</code> that are given.  If
  <code>order.groups</code> is <code>TRUE</code> the grouping factor is converted to
  an ordered factor with the ordering determined by
  <code>FUN</code>. Depending on the number of grouping levels and the type of
  primary covariate, the returned object will be of one of three
  classes: <code>nfnGroupedData</code> - numeric covariate, single level of
  nesting; <code>nffGroupedData</code> - factor covariate, single level of
  nesting; and <code>nmGroupedData</code> - multiple levels of
  nesting. Several modeling and plotting functions can use the formula
  stored with a <code>groupedData</code> object to construct default plots and
  models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">groupedData</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">order.groups</span>, <span class="va">FUN</span>, <span class="va">outer</span>, <span class="va">inner</span>,</span>
<span>            <span class="va">labels</span>, <span class="va">units</span><span class="op">)</span></span>
<span><span class="co"># S3 method for groupedData</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">formula</span>, <span class="va">data</span>, <span class="va">order.groups</span>, <span class="va">FUN</span>,</span>
<span>       <span class="va">outer</span>, <span class="va">inner</span>, <span class="va">labels</span>, <span class="va">units</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>an object inheriting from class <code>groupedData</code>.</p></dd>

 <dt>formula</dt>
<dd><p>a formula of the form <code>resp ~ cov | group</code> where
   <code>resp</code> is the response, <code>cov</code> is the primary covariate, and
   <code>group</code> is the grouping factor.  The expression <code>1</code> can be
   used for the primary covariate when there is no other suitable
   candidate.  Multiple nested grouping factors can be listed separated
   by the <code>/</code> symbol as in <code>fact1/fact2</code>.  In an expression
   like this the <code>fact2</code> factor is nested within the <code>fact1</code>
   factor.</p></dd>

 <dt>data</dt>
<dd><p>a data frame in which the expressions in <code>formula</code> can
   be evaluated.  The resulting <code>groupedData</code> object will consist
   of the same data values in the same order but with additional
   attributes.</p></dd>

 <dt>order.groups</dt>
<dd><p>an optional logical value, or list of logical
   values, indicating if the grouping factors should be converted to
   ordered factors according to the function <code>FUN</code> applied to the
   response from each group. If multiple levels of grouping are present,
   this argument can be either a single logical value (which will be
   repeated for all grouping levels) or a list of logical values. If no
   names are assigned to the list elements, they are assumed in the same
   order as the group levels (outermost to innermost grouping). Ordering
   within a level of grouping is done within the levels of the grouping
   factors which are outer to it. Changing the grouping factor to an
   ordered factor does not affect the ordering of the rows in the data
   frame but it does affect the order of the panels in a trellis display
   of the data or models fitted to the data.  Defaults to <code>TRUE</code>.</p></dd>
  
 <dt>FUN</dt>
<dd><p>an optional summary function that will be applied to the
   values of the response for each level of the grouping factor, when
   <code>order.groups = TRUE</code>, to determine the ordering.  Defaults to
   the <code>max</code> function.</p></dd>

 <dt>outer</dt>
<dd><p>an optional one-sided formula, or list of one-sided
   formulas, indicating covariates that are outer to the grouping
   factor(s).  If multiple levels of grouping are present,
   this argument can be either a single one-sided formula, or a list of
   one-sided formulas. If no names are assigned to the list elements,
   they are assumed in the same order as the group levels (outermost to
   innermost grouping). An outer covariate is invariant within the sets
   of rows defined by the grouping factor.  Ordering of the groups is
   done in such a way as to preserve adjacency of groups with the same
   value of the outer variables.  When plotting a  groupedData object,
   the argument <code>outer = TRUE</code> causes the panels to be determined
   by the <code>outer</code> formula.  The points within the panels are 
   associated by level of the grouping factor. Defaults to <code>NULL</code>,
   meaning that no outer covariates are present.</p></dd>
 
 <dt>inner</dt>
<dd><p>an optional one-sided formula, or list of one-sided
   formulas, indicating covariates that are inner to the grouping
   factor(s). If multiple levels of grouping are present,
   this argument can be either a single one-sided formula, or a list of
   one-sided formulas. If no names are assigned to the list elements,
   they are assumed in the same order as the group levels (outermost to
   innermost grouping). An inner covariate can change 
   within the sets of rows defined by the grouping factor.  An inner
   formula can be used to associate points in a plot of a groupedData
   object.  Defaults to <code>NULL</code>, meaning that no inner covariates
   are present.</p></dd>
 
 <dt>labels</dt>
<dd><p>an optional list of character strings giving labels for
   the response and the primary covariate.  The label for the primary
   covariate is named <code>x</code> and that for the response is named
   <code>y</code>.  Either label can be omitted.</p></dd>

 <dt>units</dt>
<dd><p>an optional list of character strings giving the units for
   the response and the primary covariate.  The units string for the
   primary covariate is named <code>x</code> and that for the response is
   named <code>y</code>.  Either units string can be omitted.</p></dd>

 <dt>...</dt>
<dd><p>some methods for this generic require additional
    arguments.  None are used in this method.</p></dd>
 
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>an object of one of the classes <code>nfnGroupedData</code>,</p>
<p></p>
<p><code>nffGroupedData</code>, or <code>nmGroupedData</code>, and also inheriting
  from  classes <code>groupedData</code> and <code>data.frame</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Bates, D.M. and Pinheiro, J.C. (1997), "Software Design for Longitudinal
  Data", in "Modelling Longitudinal and Spatially Correlated Data:
  Methods, Applications and Future Directions", T.G. Gregoire (ed.),
  Springer-Verlag, New York.</p>
<p>Pinheiro, J.C. and Bates, D.M. (1997) "Future Directions in
  Mixed-Effects Software: Design of NLME 3.0" available at
  http://nlme.stat.wisc.edu/ <!-- %% &lt;&lt; no longer existing FIXME --></p>
<p>Pinheiro, J.C., and Bates, D.M. (2000) "Mixed-Effects Models
  in S and S-PLUS", Springer.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Douglas Bates and José Pinheiro</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></code>, <code><a href="gapply.html">gapply</a></code>,
  <code><a href="gsummary.html">gsummary</a></code>,
  <code><a href="lme.html">lme</a></code>,
  <code><a href="plot.nffGroupedData.html">plot.nffGroupedData</a></code>,
  <code><a href="plot.nfnGroupedData.html">plot.nfnGroupedData</a></code>,
  <code><a href="plot.nmGroupedData.html">plot.nmGroupedData</a></code>,
  <code><a href="reStruct.html">reStruct</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Orth.new</span> <span class="op">&lt;-</span>  <span class="co"># create a new copy of the groupedData object</span></span></span>
<span class="r-in"><span>  <span class="fu">groupedData</span><span class="op">(</span> <span class="va">distance</span> <span class="op">~</span> <span class="va">age</span> <span class="op">|</span> <span class="va">Subject</span>,</span></span>
<span class="r-in"><span>              data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span> <span class="va">Orthodont</span> <span class="op">)</span>,</span></span>
<span class="r-in"><span>              FUN <span class="op">=</span> <span class="va">mean</span>,</span></span>
<span class="r-in"><span>              outer <span class="op">=</span> <span class="op">~</span> <span class="va">Sex</span>,</span></span>
<span class="r-in"><span>              labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> x <span class="op">=</span> <span class="st">"Age"</span>,</span></span>
<span class="r-in"><span>                y <span class="op">=</span> <span class="st">"Distance from pituitary to pterygomaxillary fissure"</span> <span class="op">)</span>,</span></span>
<span class="r-in"><span>              units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> x <span class="op">=</span> <span class="st">"(yr)"</span>, y <span class="op">=</span> <span class="st">"(mm)"</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span> <span class="va">Orth.new</span> <span class="op">)</span>         <span class="co"># trellis plot by Subject</span></span></span>
<span class="r-plt img"><img src="groupedData-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span> <span class="va">Orth.new</span> <span class="op">)</span>      <span class="co"># extractor for the formula</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> distance ~ age | Subject</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x000002bad79c7cf8&gt;</span>
<span class="r-in"><span><span class="fu"><a href="gsummary.html">gsummary</a></span><span class="op">(</span> <span class="va">Orth.new</span> <span class="op">)</span>     <span class="co"># apply summary by Subject</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     distance age Subject    Sex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M16   23.000  11     M16   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M05   23.000  11     M05   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M02   23.375  11     M02   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M11   23.625  11     M11   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M07   23.750  11     M07   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M08   23.875  11     M08   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M03   24.250  11     M03   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M12   24.250  11     M12   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M13   24.250  11     M13   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M14   24.875  11     M14   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M09   25.125  11     M09   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M15   25.875  11     M15   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M06   26.375  11     M06   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M04   26.625  11     M04   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M01   27.750  11     M01   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M10   29.500  11     M10   Male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F10   18.500  11     F10 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F09   21.125  11     F09 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F06   21.125  11     F06 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F01   21.375  11     F01 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F05   22.625  11     F05 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F07   23.000  11     F07 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F02   23.000  11     F02 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F08   23.375  11     F08 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F03   23.750  11     F03 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F04   24.875  11     F04 Female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F11   26.375  11     F11 Female</span>
<span class="r-in"><span><span class="va">fm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="lme.html">lme</a></span><span class="op">(</span> <span class="va">Orth.new</span> <span class="op">)</span>   <span class="co"># fixed and groups formulae extracted from object</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in is.data.frame(data):</span> object 'Orth.new' not found</span>
<span class="r-in"><span><span class="va">Orthodont2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">Orthodont</span>, FUN <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by José Pinheiro, Douglas Bates, R Core Team.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

